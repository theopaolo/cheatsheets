---
interface Props {
	title: string;
	href: string;
	index: number;
	Content: any;
}

const { title, href, index, Content } = Astro.props;
---

<a href={href} class="sheet" data-index={index} data-astro-prefetch="hover" transition:name={`sheet-${index}`}>
	<article class="sheet-content">
		<h2>{title}</h2>
		<div class="sheet-preview">
			<Content />
		</div>
	</article>
</a>

<style>
	.sheet {
		display: block;
		text-decoration: none;
		color: var(--color-text);
		transition: transform var(--transition-base);
	}

	.sheet-content {
		padding: var(--space-4);
		border: 1px solid var(--color-border);
		background-color: var(--color-white);
		aspect-ratio: 1 / 1.414; /* A4 paper ratio */
		display: flex;
		flex-direction: column;
		gap: var(--space-3);
		transition: border-color var(--transition-fast);
		overflow: hidden;
	}

	.sheet:hover .sheet-content {
		border-color: var(--color-gray-300);
	}

	.sheet:focus-visible {
		outline: 2px solid var(--color-black);
		outline-offset: 2px;
	}

	.sheet h2 {
		margin: 0;
		font-size: var(--font-size-lg);
		font-weight: 600;
		flex-shrink: 0;
	}

	.sheet-preview {
		flex: 1;
		overflow: hidden;
		position: relative;
		font-size: 0.375rem; /* Very tiny text */
		line-height: 1.3;
		color: var(--color-gray-300);
		opacity: 0.6;
		pointer-events: none;
		user-select: none;
	}

	.sheet-preview :global(*) {
		margin: 0;
		padding: 0;
		font-size: inherit;
		line-height: inherit;
	}

	.sheet-preview :global(h1),
	.sheet-preview :global(h2),
	.sheet-preview :global(h3) {
		font-weight: 600;
		margin-block: 0.5em 0.25em;
	}

	.sheet-preview :global(pre),
	.sheet-preview :global(code) {
		background: none;
		border: none;
		font-family: var(--font-family-mono);
		font-size: inherit;
	}

	.sheet-preview :global(pre) {
		white-space: pre-wrap;
		word-break: break-all;
	}

	/* Random rotations using nth-child */
	.sheet:nth-child(6n + 1) .sheet-content {
		transform: rotate(-2deg);
	}

	.sheet:nth-child(6n + 2) .sheet-content {
		transform: rotate(1deg);
	}

	.sheet:nth-child(6n + 3) .sheet-content {
		transform: rotate(-1deg);
	}

	.sheet:nth-child(6n + 4) .sheet-content {
		transform: rotate(2deg);
	}

	.sheet:nth-child(6n + 5) .sheet-content {
		transform: rotate(-3deg);
	}

	.sheet:nth-child(6n + 6) .sheet-content {
		transform: rotate(1.5deg);
	}

	.sheet:hover .sheet-content {
		transform: rotate(0deg) scale(1.02);
	}

	@media print {
		.sheet {
			display: none;
		}
	}
</style>